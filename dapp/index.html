<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WalletConnect Waku DApp</title>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>üîó WalletConnect Waku DApp</h1>
      <p class="subtitle">Connect your wallet using WalletConnect over Waku Network</p>
    </header>

    <!-- Status Section -->
    <section class="status-section">
      <div id="status" class="status">Initializing...</div>
    </section>

    <!-- Connection Section -->
    <section class="card">
      <h2>üì± Connection</h2>
      <p class="description">Connect your wallet to interact with the DApp</p>
      
      <div class="button-group">
        <button id="connect-button" class="btn btn-primary">Connect</button>
        <button id="disconnect-button" class="btn btn-secondary" disabled>Disconnect</button>
        <button id="ping-button" class="btn btn-secondary">Ping</button>
        <button id="refresh-status-button" class="btn btn-secondary btn-small">Refresh</button>
      </div>

      <!-- QR Code Container -->
      <div id="qr-container" class="qr-container" style="display: none;">
        <h3>Scan QR Code</h3>
        <canvas id="qr-code"></canvas>
        
        <div class="uri-section">
          <p class="uri-label">Connection URI:</p>
          <div id="uri-text" class="uri-text"></div>
          <button id="copy-uri-button" class="btn btn-secondary btn-small">Copy URI</button>
        </div>
      </div>

      <!-- Account Info -->
      <div id="account-info" class="account-info" style="display: none;"></div>
    </section>

    <!-- Authentication Section (Êñ∞Â¢û) -->
    <section class="card">
      <h2>üîê Authentication</h2>
      <p class="description">Login with your wallet to access protected features</p>
      
      <div class="button-group">
        <button id="login-button" class="btn btn-primary">Login</button>
        <button id="logout-button" class="btn btn-secondary">Logout</button>
        <button id="verify-token-button" class="btn btn-secondary btn-small">Verify Token</button>
        <button id="refresh-auth-button" class="btn btn-secondary btn-small">Refresh</button>
      </div>

      <!-- Authentication Info -->
      <div id="auth-info" class="account-info" style="display: none;"></div>
      
      <!-- Auth Status Display -->
      <div id="auth-status-display" class="result-box" style="display: none;"></div>
    </section>

    <!-- Protected Features Section (Êñ∞Â¢û) -->
    <div id="protected-section" style="display: none;">
      <section class="card">
        <h2>üõ°Ô∏è Protected Features</h2>
        <p class="description">These features require authentication</p>

        <div class="button-group">
          <button id="get-profile-button" class="btn btn-primary">Get User Profile</button>
          <button id="call-protected-api-button" class="btn btn-secondary">Call Protected API</button>
        </div>

        <!-- Profile Info -->
        <div id="profile-info" class="result-box" style="display: none;"></div>
        
        <!-- API Result -->
        <div id="api-result" class="result-box" style="display: none;"></div>
      </section>
    </div>

    <!-- Actions Section -->
    <div id="actions-section" style="display: none;">
      
      <!-- Send Transaction -->
      <section class="card">
        <h2>üí∏ Send Transaction</h2>
        <p class="description">Send ETH to another address</p>
        
        <div class="form-group">
          <label for="to-address">Recipient Address:</label>
          <input 
            type="text" 
            id="to-address" 
            class="input" 
            placeholder="0x..."
          />
        </div>

        <div class="form-group">
          <label for="amount">Amount (ETH):</label>
          <input 
            type="number" 
            id="amount" 
            class="input" 
            placeholder="0.01"
            step="0.001"
            min="0"
          />
        </div>
        
        <button id="send-tx-button" class="btn btn-primary">Send Transaction</button>
      </section>

      <!-- Sign Message -->
      <section class="card">
        <h2>‚úçÔ∏è Sign Message</h2>
        <p class="description">Sign a message with your wallet</p>
        
        <div class="form-group">
          <label for="message-input">Message:</label>
          <textarea 
            id="message-input" 
            class="textarea" 
            placeholder="Enter message to sign..."
          ></textarea>
        </div>

        <button id="sign-button" class="btn btn-primary">Sign Message</button>
        
        <div id="sign-result" class="result-box" style="display: none;"></div>
      </section>

      <!-- Sign Typed Data -->
      <section class="card">
        <h2>üìù Sign Typed Data (EIP-712)</h2>
        <p class="description">Sign structured data with your wallet</p>
        
        <button id="sign-typed-data-button" class="btn btn-primary">Sign Sample Typed Data</button>

        <div id="typed-data-result" class="result-box" style="display: none;"></div>
      </section>

      <!-- Chain Management -->
      <section class="card">
        <h2>‚õìÔ∏è Chain Management</h2>
        <p class="description">Switch or add blockchain networks</p>
        
        <div class="form-group">
          <label for="chain-select">Select Chain:</label>
          <select id="chain-select" class="select">
            <option value="">-- Select Chain --</option>
            <option value="0x1">Ethereum Mainnet</option>
            <option value="0x89">Polygon</option>
            <option value="0x38">BSC</option>
            <option value="0xa4b1">Arbitrum</option>
            <option value="0xa">Optimism</option>
          </select>
        </div>
        
        <div class="button-group">
          <button id="switch-chain-button" class="btn btn-primary">Switch Chain</button>
          <button id="add-chain-button" class="btn btn-secondary">Add Polygon Mumbai</button>
        </div>
      </section>

      <!-- Session Info -->
      <section class="card">
        <h2>‚ÑπÔ∏è Session Information</h2>
        <p class="description">View current session and account details</p>
        
        <div class="button-group">
          <button id="get-session-button" class="btn btn-primary">Get Session Info</button>
          <button id="get-accounts-button" class="btn btn-secondary">Get Accounts Info</button>
        </div>
        
        <div id="session-info" class="result-box" style="display: none;"></div>
        <div id="accounts-info" class="result-box" style="display: none;"></div>
      </section>

    </div>

    <!-- Footer -->
    <footer>
      <p>Built with WalletConnect SDK over Waku Network</p>
      <p>
        <a href="https://walletconnect.com" target="_blank">WalletConnect</a> | 
        <a href="https://waku.org" target="_blank">Waku</a>
      </p>
    </footer>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
